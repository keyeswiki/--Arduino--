### KE0004 Keyes Leonardo R3 开发板

![image-20250312152439526](media/image-20250312152439526.png)

---

#### **1. 概述**
Keyes Leonardo R3 是一款基于 Arduino Leonardo 的兼容开发板，采用 ATmega32U4 微控制器，支持 USB 通信功能。与传统的 Arduino UNO 不同，Keyes Leonardo R3 的 ATmega32U4 芯片内置 USB 通信模块，因此无需额外的 USB 转串口芯片。这使得开发板可以直接模拟 USB HID 设备（如键盘、鼠标、游戏手柄等），非常适合需要 USB 功能的项目开发。

Keyes Leonardo R3 提供丰富的数字和模拟接口，支持多种通信协议（如 I2C、SPI、UART），适合电子学习、创意项目和原型开发。

---

#### **2. 特点**
1. **内置 USB 通信功能**：ATmega32U4 芯片直接支持 USB 通信，无需额外的 USB 转串口芯片。
2. **USB HID 模拟**：可以模拟键盘、鼠标、游戏手柄等 USB HID 设备，适合开发人机交互项目。
3. **兼容性强**：完全兼容 Arduino Leonardo 的硬件和软件，支持 Arduino IDE 编程。
4. **高性价比**：相比原版 Arduino Leonardo，价格更实惠，适合教学和项目开发。
5. **丰富的接口**：提供多种数字、模拟接口，支持 PWM、I2C、SPI 等通信协议。
6. **板载 LED 指示灯**：便于调试和状态指示。
7. **多种供电方式**：支持 USB 供电和外接电源供电。

---

#### **3. 规格参数**
- **主控芯片**：ATmega32U4 微控制器  
- **供电方式**：
  - USB 供电：5V  
  - 外接电源：7-12V（建议 9V）  
- **引脚配置**：
  - 数字输入/输出引脚：20 个（其中 7 个支持 PWM 输出）  
  - 模拟输入引脚：12 个  
- **存储**：
  - 闪存：32KB（其中 4KB 用于引导加载程序）  
  - SRAM：2.5KB  
  - EEPROM：1KB  
- **时钟频率**：16MHz  
- **电源输出**：
  - 3.3V 和 5V 输出接口，用于外部模块供电  
- **复位按键**：支持手动复位  

---

#### **4. 接口功能**
1. **数字引脚 D0-D13**：
   - 串口通信：D0 (RX) 和 D1 (TX)  
   - 外部中断：D2 和 D3  
   - PWM 输出：D3、D5、D6、D9、D10 和 D11  
   - SPI 通信：D10 (SS)、D11 (MOSI)、D12 (MISO)、D13 (SCK)  
   - LED：D13 驱动板载 LED  
2. **模拟引脚 A0-A11**：
   - I2C 通信：A4 (SDA) 和 A5 (SCL)  
   - 可作为数字引脚使用：A0(D14)、A1(D15)、A2(D16)、A3(D17) 等  
3. **ICSP 接口**：用于烧录固件或扩展功能  
4. **USB 接口**：用于程序下载、串口调试和 USB HID 模拟  
5. **DC 电源接口**：支持 7V-12V 输入  
6. **电源输出接口**：提供 3.3V 和 5V 输出，用于外部模块供电或共地处理。

![image-20250312152455497](media/image-20250312152455497.png)

---

#### **5. 适用场景**
- **电子学习与教学**：适合初学者学习 Arduino 编程和电子电路设计。  
- **USB HID 项目开发**：如自定义键盘、鼠标、游戏手柄等。  
- **智能家居项目开发**：如智能灯光、温湿度监控等。  
- **机器人控制**：用于控制电机、舵机等执行器。  
- **传感器数据采集**：连接各种传感器模块进行数据采集和处理。  
- **DIY 创意项目**：实现个人创意，如音乐控制、LED 灯光秀等。  

---

#### **6. 怎么使用**
##### **1. 下载软件**
- 从 [Arduino 官网](https://www.arduino.cc/) 下载 Arduino IDE，并根据操作系统安装（支持 Windows、Mac 和 Linux）。

##### **2. 安装驱动**
- Keyes Leonardo R3 使用 ATmega32U4 芯片，通常无需额外安装驱动，但在 Windows 系统中，可能需要手动安装 Arduino 官方驱动。
- 驱动安装步骤：
  1. 将开发板通过 USB 数据线连接到电脑。
  2. 打开设备管理器，查看是否识别到开发板。
  3. 如果未识别，下载并安装 Arduino 官方驱动。

##### **3. Arduino IDE 介绍**
- **主要功能**：
  - **代码编辑器**：用于编写和编辑 Arduino 程序。
  - **串口监视器**：用于调试和查看开发板的串口输出。
  - **示例代码**：内置丰富的示例代码，适合初学者快速上手。
- **常用菜单**：
  - **工具 -> 开发板**：选择开发板类型（选择 Arduino Leonardo）。
  - **工具 -> 端口**：选择开发板对应的端口（如 COM3）。

##### **4. 上传代码**
1. 打开 Arduino IDE，选择 **文件 -> 示例 -> Basics -> Blink**。
2. 点击上传按钮，将代码烧录到开发板。
3. 上传完成后，观察板载 LED（D13）以 1 秒的间隔闪烁。

---

#### **7. 测试代码**
以下是一个简单的测试代码，用于点亮开发板上的板载 LED（连接到 D13 引脚）并让其以 1 秒的间隔闪烁：

```cpp
// 测试代码：让板载 LED 闪烁
void setup() {
  pinMode(13, OUTPUT); // 设置 D13 引脚为输出模式
}

void loop() {
  digitalWrite(13, HIGH); // 点亮 LED
  delay(1000);            // 延迟 1 秒
  digitalWrite(13, LOW);  // 熄灭 LED
  delay(1000);            // 延迟 1 秒
}
```

**步骤：**
1. 打开 Arduino IDE，将上述代码复制到编辑器中。
2. 点击上传按钮，将代码烧录到开发板。
3. 上传完成后，观察板载 LED（D13）以 1 秒的间隔闪烁。

---

#### **8. 注意事项**
1. **供电电压**：
   - 确保外接电源电压在 7-12V 范围内，推荐使用 9V 电源适配器。
2. **USB 数据线**：
   - 使用高质量 USB 数据线，避免因线材问题导致通信失败。
3. **驱动安装**：
   - 如果开发板未被识别，需安装 Arduino 官方驱动。
4. **引脚电流限制**：
   - 单个 I/O 引脚最大电流为 40mA，避免过载损坏引脚。
5. **避免短路**：
   - 在连接外部模块时，确保接线正确，避免短路或反接。
6. **固件烧录**：
   - 如果需要重新烧录 Bootloader，请使用 ICSP 接口。
7. **USB HID 模拟注意事项**：
   - 在使用 USB HID 功能时，确保代码逻辑正确，避免开发板被识别为不可用设备。

---

#### **9. 参考链接**
- **Arduino 官网**：[https://www.arduino.cc/](https://www.arduino.cc/)  
- **Keyes 官网**：[http://www.keyes-robot.com/](http://www.keyes-robot.com/)  
- **Arduino IDE 下载**：[https://www.arduino.cc/en/software](https://www.arduino.cc/en/software)     
- **USB HID 项目参考**：[Arduino Leonardo HID 示例](https://www.arduino.cc/en/Reference/MouseKeyboard)  

---

Keyes Leonardo R3 是一款功能强大、易于使用的开发板，非常适合需要 USB HID 功能的项目开发。通过其丰富的接口和强大的兼容性，用户可以轻松实现各种创意项目。

# new
